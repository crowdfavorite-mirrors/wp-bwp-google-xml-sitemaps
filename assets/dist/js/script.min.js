function bwp_disable_inputs(e){e("#select_news_taxonomy").prop("disabled",true);e("#select_news_cat_action").prop("disabled",true);e("#table-selected-term-genres :input").prop("disabled",true);e('input[name="submit_bwp_gxs_google_news"]').prop("disabled",true)}function bwp_enable_inputs(e){e("#select_news_taxonomy").prop("disabled",false);e("#select_news_cat_action").prop("disabled",false);e("#table-selected-term-genres :input").prop("disabled",false);e('input[name="submit_bwp_gxs_google_news"]').prop("disabled",false)}function bwp_select_news_post_type_cb(e,t){var a=t.val();bwp_disable_inputs(e);e.get(ajaxurl,{action:"bwp-gxs-get-object-taxonomies",post_type:a},function(t){if(e.isArray(t)){e("#select_news_taxonomy option:gt(0)").remove();e.each(t,function(t,a){e("#select_news_taxonomy").append(e("<option></option>").val(a.name).text(a.title))});e("#select_news_taxonomy").trigger("change")}bwp_enable_inputs(e)})}function bwp_select_news_taxonomy_cb(e,t,a){if(e.fn.dataTable.isDataTable("#table-selected-term-genres")){e("#table-selected-term-genres").DataTable().clear().destroy();e("#wrapper-selected-term-genres").addClass("bwp-no-display").find('input[name="term_genre_can_submit"]').val(0)}var n=t.val();if(n){e("#button-toggle-selected-term-genres").click()}}function bwp_button_view_selected_term_genres_cb(e,t,a){if(!e.fn.dataTable.isDataTable("#table-selected-term-genres")){e.get(ajaxurl,{action:"bwp-gxs-get-news-term-genres",news_taxonomy:e("#select_news_taxonomy").val()},function(t){var n=e("#table-selected-term-genres").DataTable({deferRender:true,autoWidth:false,order:[[1,"asc"]],columns:[{data:"id",width:"10%",orderable:false,render:function(e,t,a){return'<input type="checkbox" '+'id="news_term_'+e+'" '+'name="term_'+e+'" '+'value="1" '+(a.selected?'checked="checked" ':"")+"/>"}},{data:"name",width:"25%",render:function(e,t,a){return'<label for="news_term_'+a.id+'">'+e+"</label>"}},{data:"genres",width:"65%",orderable:false,render:function(t,a,n){var r="";e.each(t,function(e,t){r+="<label>"+'<input type="checkbox" '+'name="term_'+n.id+'_genres[]" '+'value="'+t.name+'" '+(t.selected?'checked="checked" ':"")+"/> "+t.name+"</label>"+"&nbsp;&nbsp;&nbsp;"});return e.trim(r)}}]});n.columns.adjust().clear().rows.add(t).draw();e("#wrapper-selected-term-genres").find('input[name="term_genre_can_submit"]').val(1);a()},"json")}else{a()}}function bwp_reset_exclude_form(e,t,a){e("#select-exclude-"+a).select2({ajax:{url:ajaxurl,dataType:"json",data:function(e){return{action:"bwp-gxs-get-"+a,group:t.val(),q:e.term}},processResults:function(e){return{results:e.items}}},minimumInputLength:2,templateResult:function(e){return e.title},templateSelection:function(e){return e.title}});e("#select-exclude-"+a).val(null).trigger("change");if(e.fn.dataTable.isDataTable("#table-excluded-"+a)){e("#table-excluded-"+a).DataTable().clear().destroy();e("#wrapper-excluded-"+a).addClass("bwp-no-display")}}function bwp_select_exclude_post_cb(e,t){bwp_reset_exclude_form(e,t,"posts")}function bwp_select_exclude_term_cb(e,t){bwp_reset_exclude_form(e,t,"terms")}function bwp_add_rows_to_table(e,t){e.columns.adjust().clear().rows.add(t).draw()}function bwp_add_row_to_table(e,t){e.columns.adjust().row.add(t).draw()}function bwp_remove_table_row(e,t){e.row(t).remove().draw(false)}function bwp_view_excluded_items(e,t,a,n){var r=n=="posts"?"select_exclude_post_type":"select_exclude_taxonomy";if(!e.fn.dataTable.isDataTable("#table-excluded-"+n)){e.get(ajaxurl,{action:"bwp-gxs-get-excluded-"+n,group:e("#"+r).val()},function(t){var r=e("#table-excluded-"+n).DataTable({deferRender:true,autoWidth:false,columns:[{data:"id",width:"15%"},{data:"title",width:"65%"},{data:"id",render:function(e){return'<button type="button" '+'data-item-id="'+e+'" '+'title="'+bwp_gxs.text.exclude_items.remove_title+'" '+'class="button-secondary bwp-button bwp-ua-remove">'+'<span class="dashicons dashicons-trash"></span>'+"</button>"},orderable:false,width:"20%"}]});bwp_add_rows_to_table(r,t);a()},"json")}else{a()}}function bwp_button_view_excluded_posts_cb(e,t,a){bwp_view_excluded_items(e,t,a,"posts")}function bwp_button_view_excluded_terms_cb(e,t,a){bwp_view_excluded_items(e,t,a,"terms")}function bwp_button_add_new_external_page_cb(e,t){if(!t.data){return}if(!e.fn.dataTable.isDataTable("#table-external-pages")){return}var a=e("#table-external-pages").DataTable();if(!t.updated){bwp_add_row_to_table(a,t.data)}else{a.row(function(e,a,n){return a.url===t.data.url}).data(t.data)}}function bwp_button_view_external_pages_cb(e,t,a){if(!e.fn.dataTable.isDataTable("#table-external-pages")){e.get(ajaxurl,{action:"bwp-gxs-get-external-pages"},function(t){var n=e("#table-external-pages").DataTable({deferRender:true,autoWidth:false,order:[[3,"desc"]],columns:[{data:"url",width:"55%",render:function(e){return'<a target="_blank" href="'+e+'">'+e+"</a>"}},{data:"frequency"},{data:"priority"},{data:"last_modified"},{data:"url",render:function(e){return'<button type="button" '+'data-item-id="'+e+'" '+'data-toggle="modal"'+'data-target="#modal-external-page"'+'title="'+bwp_gxs.text.external_pages.edit_title+'" '+'class="button-secondary bwp-button bwp-ua-edit">'+'<span class="dashicons dashicons-edit"></span>'+"</button>"+" "+'<button type="button" '+'data-item-id="'+e+'" '+'title="'+bwp_gxs.text.external_pages.remove_title+'" '+'class="button-secondary bwp-button bwp-ua-remove">'+'<span class="dashicons dashicons-trash"></span>'+"</button>"},orderable:false,width:"10%"}]});bwp_add_rows_to_table(n,t);a()},"json")}else{a()}}function bwp_remove_excluded_item(e,t,a,n){bwp_bootbox.confirm(bwp_gxs.text.exclude_items.remove_warning,function(){jQuery.post(ajaxurl,{action:"bwp-gxs-remove-excluded-"+n,_ajax_nonce:bwp_gxs.nonce.remove_excluded_item,group:a,id:t.data("itemId")},function(a){if(a!=1){return}if(e.fn.dataTable.isDataTable("#table-excluded-"+n+"s")){bwp_remove_table_row(e("#table-excluded-"+n+"s").DataTable(),t.parents("tr"))}})})}jQuery(function(e){"use strict";e("#external-page-last-modified").inputmask("y-m-d[ h:s]",{placeholder:"yyyy-mm-dd hh:mm",showMaskOnHover:false,removeMaskOnSubmit:true});e("#table-excluded-posts").on("click",".bwp-ua-remove",function(t){t.preventDefault();bwp_remove_excluded_item(e,e(this),e("#select_exclude_post_type").val(),"post")});e("#table-excluded-terms").on("click",".bwp-ua-remove",function(t){t.preventDefault();bwp_remove_excluded_item(e,e(this),e("#select_exclude_taxonomy").val(),"term")});e("#table-external-pages").on("click",".bwp-ua-remove",function(t){t.preventDefault();var a=e(this);bwp_bootbox.confirm(bwp_gxs.text.external_pages.remove_warning,function(){jQuery.post(ajaxurl,{action:"bwp-gxs-remove-external-page",_ajax_nonce:bwp_gxs.nonce.remove_external_page,url:a.data("itemId")},function(t){if(t!=1){return}if(e.fn.dataTable.isDataTable("#table-external-pages")){bwp_remove_table_row(e("#table-external-pages").DataTable(),a.parents("tr"))}})})});e("#modal-external-page").on("show.bs.modal",function(t,a){var n=e(t.relatedTarget);var r=e(this).find("form");if(!n.is(".bwp-ua-edit")){return}if(!e.fn.dataTable.isDataTable("#table-external-pages")){return}var l=e("#table-external-pages").DataTable();var s=l.row(n.parents("tr")).data();r.find(':input[type!="hidden"]').val(function(){return s[this.name]})})});